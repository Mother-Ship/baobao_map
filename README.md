## [抱抱美食记](https://space.bilibili.com/3494372146416178/) 视频内探店可视化项目

杭州有美食探店UP，很好

UP贴心的给自己去过的店做了表格，很好

但还不够好，我想去之前打电话确认营业状态，并且规划一下吃完之后的行程，看看附近有什么。

于是我根据UP提供的表格，从高德地图获取了所有店铺的经纬度和电话（如果存在的话），将它维护成了结构化的JSON数据。

接下来只需要在[高德地图控制台](https://console.amap.com/dev/index)申请个key，就可以把所有的店铺扔在地图里了！

效果：
![image](https://github.com/user-attachments/assets/05d1fa55-9eb3-4951-bde4-6439a313b337)

### 如何部署
- 在[高德地图控制台](https://console.amap.com/dev/index)申请一个有Web端(JS API)服务平台的key
- 替换`map.html`里`https://webapi.amap.com/maps?v=2.0&key=` 后面高德地图的key为你自己的key
- 找一个Web服务器并将`store_data.json`和`map.html`放到服务器的根目录 (例如在这两个文件所在目录执行`python -m http.server`)
- 浏览器打开`map.html`即可

### 如何贡献内容

#### 获取数据
首先，如果一次只想补齐单个店铺，那只需要 在`store_data.json`的数组里加一个新的对象，将店铺名称、地址填入对应的字段。

然后登录[高德地图坐标拾取器](https://lbs.amap.com/tools/picker)对店铺进行检索，如果检索不到也可以按地址检索，即可获取经纬度。

然后再从美团、高德之类的找到店铺电话，把经纬度、电话、抱抱的视频地址一起放到这个新对象，保存文件，接下来提交pull request就可以了。

---
而如果你想要一次性补充很多店铺，那我这里也有一个半成品爬虫可以用。

可以创建一个新的JSON文件，按`store_data.json`的字段格式，将你想补全的店铺的名字、地址维护到文件里。

你需要做的是从浏览器请求里抓取对`https://lbs.amap.com/AMapService/v3/place/text` 的**JSONP**请求

并根据这个请求的param、header来补完项目里的`amap.py`文件，运行脚本，脚本会针对`store_data.json`里的name字段，发起批量检索并输出结果，**你可以把文件名改为你创建的文件名避免重复检索已有的结果**。

接下来你需要做的是人工校对一下这些检索结果，确保地址和店名都和视频一样，而不是什么同名的分店。

---

如果根据店名检索不到结果，可以人工在网页上根据地址检索，如果通过美团等渠道确认已倒闭，也可以删除这条记录，并且给fix.txt里增添一行说明这么做的理由。

如果是无名店铺或者是联合投稿的探店，可以不往项目里维护。

#### Fork仓库并提交合并请求

我其实没指望有人真的能这么来帮我……而且能看到这个大概都懂应该怎么操作，就不细说了
